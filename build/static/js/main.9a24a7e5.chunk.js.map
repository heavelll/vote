{"version":3,"sources":["create.js","my.js","home.js","login.js","create-vote.js","ViewVote.js","register.js","App.js","serviceWorker.js","index.js"],"names":["Create","className","NodeIndexOutlined","size","style","width","type","to","PartitionOutlined","My","setUserInfo","useState","myVotes","setMyVotes","history","useHistory","useEffect","axios","get","then","res","data","votes","reverse","map","it","key","id","title","danger","onClick","push","Home","useRouteMatch","url","path","exact","activeClassName","AppstoreAddOutlined","UserOutlined","Login","nameRef","useRef","passwordRef","e","a","preventDefault","post","name","current","state","value","password","alert","response","msg","toString","placeholder","prefix","ref","Password","LockOutlined","CreateVote","query","URLSearchParams","useLocation","search","options","useArray","useInput","desc","deadLine","anonymous","useBoolean","isMultiple","moment","toISOString","window","go","LeftOutlined","onChange","index","MinusCircleFilled","length","removeIndex","handleDelete","color","setValue","slice","target","PlusCircleFilled","checked","toggle","ViewVote","userInfo","useParams","loading","setLoading","voteInfo","setVoteInfo","votings","setVotings","groupedVotings","groupBy","uniqUsersCount","uniqBy","optionId","hasVoted","isBefore","Date","isVoteDown","isAfter","ws","WebSocket","location","host","onmessage","JSON","parse","close","option","currVotings","hasCurrUserVoted","find","userId","user","voteUp","content","calcRatio","currVoting","idx","src","avatar","format","num","base","toFixed","Register","emailRef","avatarRef","conName","setConName","conEmail","setConEmail","fileAvatar","code","formData","FormData","append","file","catch","reason","email","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","beforeUpload","isJpgOrPng","message","error","isLt2M","Avatar","handleChange","info","status","originFileObj","imageUrl","setState","this","uploadButton","LoadingOutlined","PlusOutlined","marginTop","listType","showUploadList","action","alt","React","Component","onKeyUp","MailOutlined","App","console","log","hash","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9a24a7e5.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button } from 'antd';\r\nimport { NodeIndexOutlined, PartitionOutlined } from '@ant-design/icons'\r\n\r\nexport default function Create() {\r\n  return (\r\n    <>\r\n    <div className=\"create\">\r\n      <NodeIndexOutlined className=\"createicon\"/>\r\n      <div>\r\n        <Button size=\"large\" style={{width: \"70%\"}} type=\"primary\">\r\n          <Link to=\"/create-vote\">\r\n            创建单选\r\n          </Link>\r\n        </Button>\r\n      </div>\r\n    </div>\r\n    <div className=\"create\">\r\n      <PartitionOutlined className=\"createicon\"/>\r\n      <div>\r\n        <Button size=\"large\" style={{width: \"70%\"}} type=\"primary\">\r\n          <Link to=\"/create-vote?multiple=1\">\r\n            创建多选\r\n          </Link>\r\n        </Button>\r\n      </div>\r\n    </div>\r\n    </>\r\n  )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { Link, useLocation, useHistory } from 'react-router-dom'\r\nimport { Button } from 'antd'\r\n\r\nexport default function My({setUserInfo}) {\r\n  const [myVotes, setMyVotes] = useState(null);\r\n  let history = useHistory()\r\n  useEffect(() => {\r\n    axios.get('/my').then(res => {\r\n      setMyVotes(res.data);\r\n    })\r\n  }, [])\r\n  function handleLogout() {\r\n    axios.get('/logout').then(() => {\r\n      history.push('/login');\r\n      setUserInfo(null);\r\n    })\r\n  }\r\n  return(\r\n    <>\r\n      <ul>\r\n        {\r\n          myVotes\r\n          ? myVotes.votes.reverse().map(it => {\r\n            return (\r\n              <li key={it.id} className=\"voteList\">\r\n                <div><Link to={`/vote/${it.id}`}>{it.title}</Link></div>\r\n              </li>\r\n            )\r\n          })\r\n          : <li>loading...</li>\r\n        }\r\n      </ul>\r\n      <div>\r\n      <Button type=\"primary\" danger onClick={handleLogout}>\r\n        登出\r\n      </Button>\r\n      </div>\r\n    </>\r\n  )\r\n}","import React from 'react'\r\nimport { Link, useRouteMatch, Route, Redirect, NavLink } from 'react-router-dom'\r\nimport Create from './create'\r\nimport My from './my'\r\nimport { AppstoreAddOutlined, UserOutlined } from '@ant-design/icons'\r\n\r\nexport default function Home({setUserInfo}) {\r\n  let { path, url } = useRouteMatch()\r\n  return (\r\n    <>\r\n      <Route path={`${url}/`} exact>\r\n        <Redirect to={`${url}/create`}/>\r\n      </Route>\r\n      <Route path={`${url}/create`}>\r\n        <header>\r\n          创建投票\r\n        </header>\r\n        <content>\r\n          <Create />\r\n        </content>\r\n      </Route>\r\n      <Route path={`${url}/my`}>\r\n        <header>\r\n          我的投票\r\n        </header>\r\n        <content>\r\n          <My setUserInfo={setUserInfo}/>\r\n        </content>\r\n      </Route>\r\n      <footer>\r\n        <NavLink to={`${url}/create`} className=\"nav\" activeClassName=\"selected\">\r\n          <div>\r\n            <AppstoreAddOutlined className=\"navicon\"/>\r\n          </div>\r\n          <div>\r\n            创建\r\n          </div>\r\n        </NavLink>\r\n        <NavLink to={`${url}/my`} className=\"nav\" activeClassName=\"selected\">\r\n          <div>\r\n            <UserOutlined className=\"navicon\"/>\r\n          </div>\r\n          <div>\r\n            我的\r\n          </div>\r\n        </NavLink>\r\n      </footer>\r\n    </>\r\n  )\r\n}","import React, { useRef } from 'react'\r\nimport axios from 'axios'\r\nimport { useHistory, Link } from 'react-router-dom'\r\nimport { Input, Space, Button } from 'antd';\r\nimport { UserOutlined, EyeInvisibleOutlined, EyeTwoTone, LockOutlined } from '@ant-design/icons';\r\n\r\n\r\nexport default function Login({setUserInfo}) {\r\n  let history = useHistory();\r\n  let nameRef = useRef()\r\n  let passwordRef = useRef()\r\n  async function handleLogin(e) {\r\n    e.preventDefault();\r\n    try {\r\n      let res = await axios.post('/login', {\r\n        name: nameRef.current.state.value,\r\n        password: passwordRef.current.state.value\r\n      })\r\n      setUserInfo(res.data);\r\n\r\n      history.push('/home')\r\n    } catch(e) {\r\n      alert(e.response.data.msg.toString());\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <header>登录</header>\r\n      <div className=\"inputzone\">\r\n        <div>\r\n          <Input placeholder=\"请输入用户名\" className=\"login\" prefix={<UserOutlined />} ref={nameRef}/>\r\n        </div>\r\n        <br />\r\n        <div>\r\n          <Input.Password className=\"login\" prefix={<LockOutlined />} placeholder=\"请输入密码\" ref={passwordRef}/>\r\n        </div>\r\n        <br />\r\n        <Button size=\"large\" style={{width: \"70%\"}} type=\"primary\" onClick={handleLogin}>登录</Button>\r\n      </div>\r\n      <div className=\"regInLog\">\r\n        <Link to=\"/register\">注册帐号</Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n","import React from 'react'\r\nimport { useArray, useInput, useBoolean } from 'react-hanger'\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nimport 'moment/locale/zh-cn'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { Switch, Button } from 'antd'\r\nimport { LeftOutlined, MinusCircleFilled, PlusCircleFilled } from '@ant-design/icons'\r\n\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function CreateVote() {\r\n  var query = useQuery();\r\n  let history = useHistory();\r\n  let options = useArray(['', ''])\r\n  let title = useInput()\r\n  let desc = useInput()\r\n  let deadLine = useInput()\r\n  let anonymous = useBoolean()\r\n  let isMultiple = useBoolean(query.get('multiple') == 1 ? true : false)\r\n  function handleDelete(index) {\r\n    if(options.value.length > 2) {\r\n      options.removeIndex(index);\r\n    }\r\n  }\r\n  async function handlePost(e) {\r\n    e.preventDefault();\r\n    try {\r\n      if(!title.value || !options.value || !deadLine.value) {\r\n        alert('请填写必填项');\r\n        return;\r\n      }\r\n      await axios.post('/vote', {\r\n        title: title.value,\r\n        desc: desc.value,\r\n        options: options.value,\r\n        deadLine: moment(deadLine.value).toISOString(),\r\n        anonymous: anonymous.value ? 1 : 0,\r\n        isMultiple: isMultiple.value ? 1 : 0\r\n      })\r\n      alert('创建成功')\r\n      history.push(`/home/my`)\r\n    } catch(e) {\r\n      alert('创建失败');\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <header>\r\n        <span className=\"back\" onClick={() => {window.history.go(-1)}}>\r\n          <LeftOutlined />\r\n        </span>\r\n        {\r\n          isMultiple.value\r\n          ? '创建多选投票'\r\n          : '创建单选投票'\r\n        }\r\n      </header>\r\n      <div className=\"voteUpOuter\">\r\n        <div className=\"voteUpInner\">\r\n          <div>\r\n            <input type=\"text\" className=\"voteTitle voteInput\" value={title.value} onChange={title.onChange} placeholder=\"投票标题\"/>\r\n          </div>\r\n          <div>\r\n            <input type=\"text\" className=\"voteDesc voteInput\" value={desc.value} onChange={desc.onChange} placeholder=\"描述内容(选填)\"/>\r\n          </div>\r\n          <ul>\r\n            {\r\n              options.value.map((it, index) => {\r\n                return (\r\n                  <div key={index} className=\"optBox\">\r\n                    <MinusCircleFilled onClick={() => handleDelete(index)} className=\"dltadd dltBtn\" style={{color: \"red\"}}/>\r\n                    <input className=\"voteOpt voteInput\" type=\"text\" placeholder=\"选项\" value={it} onChange={e => {options.setValue([...options.value.slice(0, index), e.target.value, ...options.value.slice(index + 1)])}}/>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n          </ul>\r\n          <div className=\"addOpt\" onClick={() => {options.push('')}} >\r\n            <PlusCircleFilled style={{color: '#1890FF'}} className=\"dltadd\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"checkPart\">\r\n        <div className=\"checkInnerPart\">\r\n          <div className=\"checkBox\">\r\n            <span>截止日期</span> \r\n            <div className=\"checkInput\">\r\n              <input type=\"datetime-local\" className=\"deadLine\" value={deadLine.value} onChange={deadLine.onChange}/>\r\n            </div>\r\n          </div>\r\n          <div className=\"checkBox\">\r\n            <span>匿名投票</span> \r\n            <div className=\"checkInput\">\r\n              <Switch checked={anonymous.value} onChange={anonymous.toggle}/>\r\n            </div>\r\n          </div>\r\n          <div className=\"checkBox\">\r\n            <span>多选</span> \r\n            <div className=\"checkInput\">\r\n              <Switch checked={isMultiple.value} onChange={isMultiple.toggle}/>\r\n            </div>\r\n          </div>\r\n          <div className=\"sendCreate\">\r\n            <Button style={{width: \"70%\"}} type=\"primary\" size=\"large\" onClick={handlePost}>创建</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useParams } from 'react-router-dom'\r\nimport './ViewVote.css'\r\nimport moment from 'moment'\r\nimport 'moment/locale/zh-cn'\r\nimport { groupBy, uniqBy } from 'lodash'\r\nimport { LeftOutlined } from '@ant-design/icons'\r\n\r\nexport default function ViewVote({ userInfo }) {\r\n  let { id } = useParams();\r\n  // console.log(id.id)\r\n  let [loading, setLoading] = useState(true);\r\n  let [voteInfo, setVoteInfo] = useState(null);\r\n  let [votings, setVotings] = useState(null);\r\n\r\n  if(!loading) {\r\n    var groupedVotings = groupBy(votings, 'optionId');\r\n    var uniqUsersCount = uniqBy(votings, 'userId').length;\r\n  }\r\n\r\n  useEffect(() => {\r\n    setVoteInfo(null);\r\n    setLoading(true);\r\n    axios.get(`/vote/${id}`).then(res => {\r\n      setVoteInfo(res.data.data);\r\n      \r\n      setVotings(res.data.data.votings);\r\n\r\n      setLoading(false);\r\n    })\r\n  }, [id])\r\n\r\n  useEffect(() => {\r\n    if(!voteInfo) {\r\n      return;\r\n    }\r\n    if(moment(voteInfo.deadLine).isAfter(new Date().toISOString())) {\r\n      var ws = new WebSocket(`ws://${window.location.host}/vote/${id}`);\r\n      ws.onmessage = e => {\r\n        setVotings(JSON.parse(e.data));\r\n      }\r\n      return () => ws.close()\r\n    }\r\n  }, [id, voteInfo])\r\n\r\n  async function voteUp(optionId, hasVoted) {\r\n    //已过deadline\r\n    if(moment(voteInfo.deadLine).isBefore(new Date().toISOString())) {\r\n      alert('该投票已过期，不能再进行投票');\r\n      return;\r\n    }\r\n    // if(!hasVoted) {\r\n    //   var thisVoting = {\r\n    //     id: -1,\r\n    //     optionId: optionId,\r\n    //     voteId: id,\r\n    //     userId: userInfo.id,\r\n    //     avatar: userInfo.avatar\r\n    //   }\r\n    //   setVotings([...votings, thisVoting]);\r\n    // } else {\r\n    //   var filterVotings = votings.filter(it => {\r\n    //     return !(it.userId === userInfo.id && optionId === it.optionId);\r\n    //   })\r\n    //   setVotings(filterVotings);\r\n    // }\r\n\r\n    await axios.post(`/voteup/${id}`, {\r\n      optionId,\r\n      isVoteDown: hasVoted\r\n    }).then(res => {\r\n      // console.log(res.data);\r\n    })\r\n  }\r\n\r\n\r\n  if(loading) {\r\n    return (\r\n      <div>loading...</div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"viewVote\">\r\n      \r\n      <header>\r\n        <span className=\"back\" onClick={() => {window.history.go(-1)}}>\r\n          <LeftOutlined />\r\n        </span>\r\n        进行投票\r\n      </header>\r\n      <div className=\"voteHead\">\r\n        <h2>{voteInfo.title}</h2>\r\n        <p>{voteInfo.desc} <span>{voteInfo.isMultiple ? '[多选]' : '[单选]'}</span></p>\r\n      </div>\r\n      <ul>\r\n        {\r\n          voteInfo.options.map(option => {\r\n            var currVotings = groupedVotings[option.id] || [];\r\n            if(userInfo) {\r\n              \r\n              var hasCurrUserVoted = !!currVotings.find(it => it.userId === userInfo.user.id);\r\n              \r\n            }\r\n            return (\r\n            <li key={option.id}>\r\n              <div className=\"innerVote\">\r\n                {\r\n                  userInfo\r\n                  ? (\r\n                  <>\r\n                    <div className=\"outerVote\" onClick={() => voteUp(option.id, hasCurrUserVoted)}>\r\n                      <div className=\"voteLine\">\r\n                        {\r\n                          hasCurrUserVoted && \r\n                          <span className=\"checkIdt\"></span>\r\n                        }\r\n                        <input type='checkbox' checked={hasCurrUserVoted} onChange={() => {}} />\r\n                        <span className='voteContent'>{option.content}</span>\r\n                        <span className=\"statistic\">{currVotings.length}票 {calcRatio(currVotings.length, uniqUsersCount)}%</span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"option-ratio\" style={{width: calcRatio(currVotings.length, uniqUsersCount) + '%'}}></div>\r\n                    <div className=\"avatarZone\">\r\n                      {\r\n                        currVotings.map((currVoting, idx) => {\r\n                          return (\r\n                            <img src={currVoting.avatar} key={idx} className=\"avatar\"></img>\r\n                          )\r\n                        })\r\n                      }\r\n                    </div>\r\n                  </>\r\n                  )\r\n                  : <div>loading...</div>\r\n                }\r\n              </div>\r\n            </li>\r\n            )\r\n          })\r\n        }\r\n      </ul>\r\n      {\r\n        moment(voteInfo.deadLine).isBefore(new Date().toISOString()) &&\r\n        <div className=\"deadLine\">(已过期)</div>\r\n      }\r\n      <span className='deadLine'>投票截止至: {moment(voteInfo.deadLine).format('LLLL')}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction calcRatio(num, base) {\r\n  if(base === 0) {\r\n    return 0;\r\n  }\r\n  return (num / base * 100).toFixed();\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { Input, Button, Upload, message } from 'antd'\r\nimport { LockOutlined, UserOutlined, LoadingOutlined, PlusOutlined, MailOutlined } from '@ant-design/icons'\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nexport default function Register() {\r\n  let history = useHistory();\r\n  let nameRef = useRef();\r\n  let emailRef = useRef();\r\n  let passwordRef = useRef();\r\n  let avatarRef = useRef();\r\n  let [conName, setConName] = useState();\r\n  let [conEmail, setConEmail] = useState();\r\n  let fileAvatar = {};\r\n\r\n\r\n  async function handleRegister() {\r\n    \r\n    if (!conName || !passwordRef.current.state.value || !conEmail || conName.code || conEmail.code) {\r\n      alert('注册失败，请重新填写');\r\n      return;\r\n    }\r\n    var formData = new FormData();\r\n    formData.append('name', nameRef.current.state.value);\r\n    formData.append('password', passwordRef.current.state.value);\r\n    formData.append('email', emailRef.current.state.value);\r\n    formData.append('avatar', fileAvatar.file);\r\n    await axios.post('register', formData).then(res => {\r\n      alert(res.data.msg);\r\n      history.push('/login');\r\n    }).catch(reason => {\r\n      alert(reason)\r\n    })\r\n  }\r\n\r\n\r\n\r\n  async function conflictName(e) {\r\n    // let exp = /^[a-z]$|^[1-9_]$|^Backspace$/;\r\n    // if (exp.test(e.key)) {\r\n    await axios.post('/conflict/name', {\r\n      name: nameRef.current.state.value\r\n    }).then(res => {\r\n      setConName(res.data);\r\n    }).catch(reason => {\r\n      \r\n    })\r\n    // }\r\n  }\r\n\r\n  async function conflictEmail(e) {\r\n    // let exp = /^[a-z]$|^[1-9_]$|^Backspace$/;\r\n    // if (exp.test(e.key)) {\r\n    await axios.post('/conflict/email', {\r\n      email: emailRef.current.state.value\r\n    }).then(res => {\r\n      setConEmail(res.data);\r\n    }).catch(reason => {\r\n\r\n    })\r\n    // }\r\n  }\r\n\r\n\r\n\r\n  function getBase64(img, callback) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result));\r\n    reader.readAsDataURL(img);\r\n  }\r\n\r\n  function beforeUpload(file) {\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    if (!isJpgOrPng) {\r\n      message.error('You can only upload JPG/PNG file!');\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if (!isLt2M) {\r\n      message.error('Image must smaller than 2MB!');\r\n    }\r\n    fileAvatar.file = file;\r\n    return isJpgOrPng && isLt2M;\r\n  }\r\n\r\n  class Avatar extends React.Component {\r\n    state = {\r\n      loading: false,\r\n    };\r\n\r\n    handleChange = info => {\r\n      if (info.file.status === 'uploading') {\r\n        this.setState({ loading: true });\r\n        return;\r\n      }\r\n      if (info.file.status === 'done') {\r\n        // Get this url from response in real world.\r\n        getBase64(info.file.originFileObj, imageUrl =>\r\n          this.setState({\r\n            imageUrl,\r\n            loading: false,\r\n          }),\r\n        );\r\n      }\r\n    };\r\n\r\n    render() {\r\n      const { loading, imageUrl } = this.state;\r\n      const uploadButton = (\r\n        <div>\r\n          {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n          <div style={{ marginTop: 8 }}>Upload</div>\r\n        </div>\r\n      );\r\n      return (\r\n        <Upload\r\n          name=\"avatar\"\r\n          listType=\"picture-card\"\r\n          className=\"avatar-uploader\"\r\n          showUploadList={false}\r\n          action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n          beforeUpload={beforeUpload}\r\n          onChange={this.handleChange}\r\n        >\r\n          {imageUrl ? <img src={imageUrl} alt=\"avatar\" style={{ width: '100%' }} /> : uploadButton}\r\n        </Upload>\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <header>注册</header>\r\n      <div className=\"inputzone\">\r\n        <div>\r\n          <Input placeholder=\"请输入用户名\" onKeyUp={conflictName} className=\"login\" prefix={<UserOutlined />} ref={nameRef} />\r\n        </div>\r\n        {\r\n          conName\r\n            ? <span className={conName.code ? \"con\" : \"notCon\"}>{conName.msg}</span>\r\n            : <br />\r\n        }\r\n        <div>\r\n          <Input.Password className=\"login\" prefix={<LockOutlined />} placeholder=\"请输入密码\" ref={passwordRef} />\r\n        </div>\r\n        <br />\r\n        <div>\r\n          <Input placeholder=\"请输入邮箱\" onKeyUp={conflictEmail} className=\"login\" prefix={<MailOutlined />} ref={emailRef} />\r\n        </div>\r\n        {\r\n          conEmail\r\n            ? <span className={conEmail.code ? \"con\" : \"notCon\"}>{conEmail.msg}</span>\r\n            : <br />\r\n        }\r\n        <div>\r\n          上传头像:\r\n          <Avatar ref={avatarRef} />\r\n          <br />\r\n        </div>\r\n        <Button size=\"large\" style={{ width: \"70%\" }} type=\"primary\" onClick={handleRegister}>注册</Button>\r\n      </div>\r\n      <div className=\"regInLog\">\r\n        <Link to=\"/login\">去登陆</Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\nimport './App.css';\nimport { Switch, Route, useHistory, Redirect } from 'react-router-dom'\nimport 'antd/dist/antd.css'\nimport axios from 'axios'\nimport Home from './home'\nimport Login from './login'\nimport CreateVote from './create-vote'\nimport ViewVote from './ViewVote'\nimport Register from './register'\n\nconst { useEffect } = React\n\nfunction App() {\n  let history = useHistory();\n  var [userInfo, setUserInfo] = useState(null);\n  useEffect(() => {\n    (async function() {\n      await axios.get('/userInfo').then(res => {\n        setUserInfo(res.data)\n      }).catch(e => {\n        console.log('用户未登录，将显示登录界面')\n        if(window.location.hash === '#/register') {\n          history.push('/register')\n        } else {\n          history.push('/login')\n        }\n      })\n    })()\n  }, [])\n\n\n  return (\n    <div className=\"App\">\n      <Switch>\n        <Route path=\"/register\">\n          <Register />\n        </Route>\n        <Route path=\"/\" exact>\n          <Redirect to=\"/home\" />\n        </Route>\n        <Route path=\"/home\">\n          {\n            userInfo\n            ? <Home setUserInfo={setUserInfo}/>\n            : <Login  setUserInfo={setUserInfo}/>\n          }\n        </Route>\n        <Route path=\"/login\">\n          <Login  setUserInfo={setUserInfo}/>\n        </Route>\n        <Route path=\"/create-vote\">\n          <CreateVote />\n        </Route>\n        <Route path=\"/vote/:id\">\n          <ViewVote userInfo={userInfo}/>\n        </Route>\n        \n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { HashRouter as Router } from 'react-router-dom'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}